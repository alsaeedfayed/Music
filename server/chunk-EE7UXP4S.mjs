import './polyfills.server.mjs';
import{a as le,b as I,c as se,e as V}from"./chunk-U5WFZU7G.mjs";import{e as ie,f as ne,g as D,j as ae,q as re,y as oe}from"./chunk-F6LGCE35.mjs";import{$a as h,Bb as Q,Cb as c,Db as T,E as q,Eb as M,Gb as Z,Hb as ee,Ia as S,Ib as te,Jb as k,L as B,Na as R,Pa as L,Q as g,V as f,W as u,_a as b,ab as E,bb as O,cb as P,da as x,db as _,eb as n,fb as o,gb as m,kb as z,lb as G,mb as U,nb as C,oa as H,qb as p,sb as s,tb as K,ua as A,ub as J,vb as X,wb as w,xa as l,xb as y,yb as v,zb as Y}from"./chunk-5LKHUQHD.mjs";import"./chunk-T55IDOPT.mjs";var F=class t{ngOnInit(){}store=g(V);artist=this.store.artists.current;useDefault=x(!1);playMix=new L;onplayMix(){this.playMix.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-artist-header"]],outputs:{playMix:"playMix"},decls:45,vars:4,consts:[[1,"artistheader","col-12","d-flex","justify-content-between","align-items-start"],[1,"artistheader__profile"],["alt","artist image",1,"object-fit-contain",3,"src"],[1,"d-flex","flex-column","gap-2"],[1,"fs-1","fw-bold"],[1,"text-secondary"],[1,"d-none","d-sm-flex","gap-4"],[1,"fs-1","bx","bxl-facebook","text-bg-primary"],[1,"fs-1","bx","bxl-twitter","text-bg-info","text-white"],[1,"artistheader__actions","mt-5","d-flex","gap-5","align-items-center"],[1,"btn-primary","d-flex","align-items-center",3,"click"],[1,"bx","bx-play","fs-1"],[1,"bx","bx-heart","fs-1","icon"],[3,"useDefault"],[1,"context-menu__card--item"],[1,"bx","bx-play","fs-2"],[1,"bx","bx-heart","fs-2"],[1,"bx","bx-share","fs-2"],[1,"bx","bx-block","fs-2"],[1,"bx","bx-message","fs-2"]],template:function(e,a){if(e&1&&(n(0,"div",0)(1,"div",1),m(2,"img",2),n(3,"div",3)(4,"p",4),c(5),o(),n(6,"span",5),c(7),o()()(),n(8,"div",6),m(9,"i",7)(10,"i",8),o()(),n(11,"div",9)(12,"button",10),p("click",function(){return a.onplayMix()}),m(13,"i",11),n(14,"span"),c(15,"mix"),o()(),n(16,"a"),m(17,"i",12),o(),n(18,"span")(19,"app-context-menu",13)(20,"li")(21,"div",14),m(22,"i",15),n(23,"span"),c(24,"play mix"),o()()(),n(25,"li")(26,"div",14),m(27,"i",16),n(28,"span"),c(29,"add to my favourites"),o()()(),n(30,"li")(31,"div",14),m(32,"i",17),n(33,"span"),c(34,"share"),o()()(),n(35,"li")(36,"div",14),m(37,"i",18),n(38,"span"),c(39,"dont recommend this artist"),o()()(),n(40,"li")(41,"div",14),m(42,"i",19),n(43,"span"),c(44,"report a problem"),o()()()()()()),e&2){let r,d,W;l(2),_("src",(r=a.artist())==null?null:r.picture_medium,A),l(3),T((d=a.artist())==null?null:d.name),l(2),M(" ",(W=a.artist())==null?null:W.id," Fans "),l(12),_("useDefault",!1)}},dependencies:[I],styles:["[_ngcontent-%COMP%]:root{--color-text-primary: #ffffff;--color-text-secondary: #a1a1aa;--color-error: #ef4444;--color-border: #27272a}.theme-dark[_ngcontent-%COMP%]{--color-bg: #1e1e1e;--color-card: rgba(255, 255, 255, .05);--color-primary: #8b5cf6;--color-primary-gradient: linear-gradient(135deg, #8b5cf6, #ec4899);--color-secondary: #10b981;--color-text-primary: #f5f2f2;--color-text-secondary: #4b5563;--color-secondary-gradient: linear-gradient(135deg, #10b981, #facc15);--color-layout-bg: #1a1a1a;--color-grey-light: #a1a5ac}.theme-light[_ngcontent-%COMP%]{--color-bg: #ffffff;--color-card: #f5f5f5;--color-primary: #7c3aed;--color-primary-gradient: linear-gradient(135deg, #7c3aed, #d946ef);--color-secondary: #059669;--color-secondary-gradient: linear-gradient(135deg, #059669, #eab308);--color-text-primary: #111111;--color-text-secondary: #4b5563;--color-layout-bg: #f8f8f8;--color-grey-light: #a1a5ac}.artistheader__profile[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:2rem}@media screen and (max-width: 746px){.artistheader__profile[_ngcontent-%COMP%]{flex-direction:column;align-items:start}}.artistheader__profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}@media screen and (max-width: 746px){.artistheader__profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:1rem;width:100%}}  .context-menu{transition:background .5s ease}  .context-menu:hover{background:var(--color-primary-gradient);display:flex;padding:.7rem;border-radius:50%;color:#fff;cursor:pointer}"]})};var $=class t{http=g(re);cacheService=g(se);Get_Artist_tracks(i){let e=this.cacheService.cache.get(i);if(e)return e;let a=le.ARTIST.TOP_TRACKS(i),r=this.http.get(`${a}?limit=10`).pipe(q(1));return this.cacheService.Set_Cache(i,r),r}static \u0275fac=function(e){return new(e||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var de=["headerContext"],_e=[[["","actions",""]]],fe=["[actions]"],ue=t=>({$implicit:t});function ge(t,i){if(t&1&&(n(0,"th"),c(1),o()),t&2){let e=i.$implicit;Q(e.header),Y("width",e.width),l(),M(" ",e.header," ")}}function xe(t,i){t&1&&(n(0,"div",6),J(1),o())}function be(t,i){if(t&1){let e=C();n(0,"th",3)(1,"div",5),b(2,xe,2,0,"div",6),n(3,"div")(4,"input",7),p("change",function(){f(e);let r=s();return u(r.toggleSelectAll())}),o()()()()}if(t&2){let e=s();l(2),h(e.hasSelection()?2:-1),l(2),_("checked",e.isAllSelected())}}function he(t,i){t&1&&U(0)}function Ce(t,i){if(t&1&&(z(0),R(1,he,1,0,"ng-container",9),G()),t&2){let e=s().$implicit,a=s().$implicit;l(),_("ngTemplateOutlet",e.cellTemplate)("ngTemplateOutletContext",Z(2,ue,a))}}function ye(t,i){if(t&1&&c(0),t&2){let e=s().$implicit,a=s().$implicit;M(" ",a[e.key]," ")}}function ve(t,i){if(t&1&&(n(0,"td"),b(1,Ce,2,4,"ng-container")(2,ye,1,1),o()),t&2){let e=i.$implicit;Q(e.header+"data"),l(),h(e.cellTemplate?1:2)}}function Se(t,i){if(t&1){let e=C();n(0,"td")(1,"input",7),p("change",function(){f(e);let r=s().$implicit,d=s();return u(d.toggleRow(r))}),o()()}if(t&2){let e=s().$implicit,a=s();l(),_("checked",a.isRowSelected(e))}}function Te(t,i){if(t&1&&(n(0,"tr",4),O(1,ve,3,3,"td",8,E),b(3,Se,2,1,"td"),o()),t&2){let e=s();l(),P(e.cols()),l(2),h(e.isSelectable?3:-1)}}var N=class t{data=x([]);cols=x([]);isSelectable=!1;headerContextTpl;selectedRows=new Set;toggleRow(i){this.selectedRows?.has(i)?this.selectedRows?.delete(i):this.selectedRows.add(i)}toggleSelectAll(){this.isAllSelected()?this.selectedRows.clear():this.data().forEach(i=>this.selectedRows.add(i)),console.log(this.selectedRows)}isAllSelected(){return this.data().length>0&&this.selectedRows.size===this.data().length}isRowSelected(i){return this.selectedRows.has(i)}hasSelection(){return this.selectedRows.size>0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-table"]],contentQueries:function(e,a,r){if(e&1&&X(r,de,5),e&2){let d;y(d=v())&&(a.headerContextTpl=d.first)}},inputs:{data:"data",cols:"cols",isSelectable:"isSelectable"},ngContentSelectors:fe,decls:10,vars:1,consts:[[1,"table-container"],[1,"generic-table"],[3,"class","width"],[1,"actionCheckBox"],[1,"rowdata"],[1,"d-flex","gap-4"],[1,"actions"],["type","checkbox",3,"change","checked"],[3,"class"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,a){e&1&&(K(_e),n(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),O(4,ge,2,5,"th",2,E),b(6,be,5,2,"th",3),o()(),n(7,"tbody"),O(8,Te,4,1,"tr",4,E),o()()()),e&2&&(l(4),P(a.cols()),l(2),h(a.isSelectable?6:-1),l(2),P(a.data()))},dependencies:[D,ie],encapsulation:2})};var we=["trackCell"],Me=["albumCell"],ke=["timeCell"],Ae=["actionCell"];function Re(t,i){t&1&&(c(0,". "),m(1,"i",14))}function Ee(t,i){if(t&1){let e=C();n(0,"i",15),p("click",function(){f(e);let r=s(2);return u(r.pause())}),n(1,"span",16),p("click",function(){f(e);let r=s(2);return u(r.pause())}),n(2,"span",17),p("click",function(){f(e);let r=s(2);return u(r.pause())}),o(),n(3,"span",17),p("click",function(){f(e);let r=s(2);return u(r.pause())}),o(),m(4,"span"),o()()}}function Oe(t,i){if(t&1){let e=C();n(0,"div",10)(1,"div",11),p("click",function(){let r=f(e).$implicit,d=s();return u(d.playSong(r))}),m(2,"img",12),b(3,Re,2,0),b(4,Ee,5,0,"i",13),o(),n(5,"span"),c(6),o()()}if(t&2){let e=i.$implicit,a=s();l(2),_("src",e.album.cover_small,A),l(),h(e!==a.store.songs.current()?3:-1),l(),h(e===a.store.songs.current()?4:-1),l(2),T(e.title)}}function Pe(t,i){if(t&1&&(n(0,"div",18),m(1,"i",19),n(2,"div"),m(3,"app-context-menu",20),o(),n(4,"span"),c(5),o()()),t&2){let e=i.$implicit;l(3),_("useDefault",!0),l(2),T(e.album.title)}}function De(t,i){if(t&1&&(n(0,"span"),c(1),ee(2,"date"),o()),t&2){let e=i.$implicit;l(),T(te(2,1,e.duration,"mm:ss"))}}function Ie(t,i){if(t&1){let e=C();n(0,"button",17),p("click",function(){let r=f(e).$implicit,d=s();return u(d.selectSong(r))}),c(1,"selecttt"),o()}}var me=class t{platformID=g(H);router=g(oe);artist=x({});store=g(V);artistService=g($);trackCell;albumCell;timeCell;actionCell;isSelectable=!0;columns=x([]);songs=x([]);ngOnInit(){if(ae(this.platformID)){let i=window.history.state?.artistData;this.artist.set(i),this.store.artists.current.set(i)}this.getArtistTopTracks()}ngAfterViewInit(){this.columns.set([{key:"title",header:"Track",cellTemplate:this.trackCell},{key:"album",header:"Album",cellTemplate:this.albumCell},{key:"duration",header:"Duration",cellTemplate:this.timeCell}])}getArtistTopTracks(){this.artist().id&&this.artistService.Get_Artist_tracks(this.artist().id).subscribe({next:i=>{let e=i.data;e?.length&&(this.store.songs.setPlayList(e),this.songs.set(e))}})}onPlayMix(){if(this.store.songs.playList()){let i=this.store.songs.playList()?.[0];i&&this.store.songs.playSong(i)}}playSong(i){this.store.songs.playSong(i)}pause(){this.store.songs.pause()}viewAlbum(i){console.log("Album",i)}selectSong(i){console.log("Play",i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-artist"]],viewQuery:function(e,a){if(e&1&&(w(we,5),w(Me,5),w(ke,5),w(Ae,5)),e&2){let r;y(r=v())&&(a.trackCell=r.first),y(r=v())&&(a.albumCell=r.first),y(r=v())&&(a.timeCell=r.first),y(r=v())&&(a.actionCell=r.first)}},decls:14,vars:4,consts:[["trackCell",""],["albumCell",""],["timeCell",""],["actionCell",""],[1,"container","row"],[1,"p-5","col-12"],[3,"playMix"],[1,"track"],[3,"cols","isSelectable","data"],["actions","",3,"useDefault"],[1,"d-flex","align-content-center","track-cell","align-items-center","gap-4"],[1,"imageicon",3,"click"],["alt","cover","width","40","height","40",3,"src"],[1,"waves-icon"],[1,"play-icon","bx","bx-play","fs-3","p-1","d-flex","align-items-center","justify-content-center","text-white"],[1,"waves-icon",3,"click"],[1,"audio-waves",3,"click"],[3,"click"],[1,"d-flex","items-center","gap-5"],[1,"bx","bx-heart"],[3,"useDefault"]],template:function(e,a){if(e&1){let r=C();n(0,"div",4)(1,"div",5)(2,"app-artist-header",6),p("playMix",function(){return f(r),u(a.onPlayMix())}),o()(),n(3,"div",7)(4,"app-table",8),m(5,"app-context-menu",9),o()()(),R(6,Oe,7,4,"ng-template",null,0,k)(8,Pe,6,2,"ng-template",null,1,k)(10,De,3,4,"ng-template",null,2,k)(12,Ie,2,0,"ng-template",null,3,k)}e&2&&(l(4),_("cols",a.columns)("isSelectable",a.isSelectable)("data",a.songs),l(),_("useDefault",!0))},dependencies:[D,F,N,I,ne],styles:[".track-cell[_ngcontent-%COMP%]   .imageicon[_ngcontent-%COMP%]{position:relative}.track-cell[_ngcontent-%COMP%]   .imageicon[_ngcontent-%COMP%]   .play-icon[_ngcontent-%COMP%]{position:absolute;top:25%;left:20%;border-radius:50%;background:var(--color-primary-gradient);opacity:0;transition:opacity .2s ease}.track-cell[_ngcontent-%COMP%]   .imageicon[_ngcontent-%COMP%]   .waves-icon[_ngcontent-%COMP%]{position:absolute;top:25%;left:20%}.track-cell[_ngcontent-%COMP%]:hover   .imageicon[_ngcontent-%COMP%]   .play-icon[_ngcontent-%COMP%]{opacity:1}"]})};export{me as Artist};
